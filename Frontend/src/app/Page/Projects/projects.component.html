<!--
---- EPITECH PROJECT, 2025
---- survivor
---- File description:
---- projects.component
--->

<div class="projects-page">
    <app-header></app-header>
    <app-hero [text]="'Projects'" [customClass]="'hero-projects'"></app-hero>
    <div *ngIf="isLoading" class="loading-container">
        <p>Loading projects...</p>
    </div>
    <div *ngIf="errorMessage" class="error-container">
        <p>{{ errorMessage }}</p>
        <button (click)="retryLoadData()" class="retry-button">Retry</button>
    </div>
    <div *ngIf="!isLoading && !errorMessage" class="filters-container">
        <app-dropdown-menu 
            [menu_name]="'Filter by location'" 
            [options]="locationOptions" 
            [multipleSelection]="true" 
            (selectionChange)="onLocationFilterChange($event)">
        </app-dropdown-menu>
        <app-dropdown-menu 
            [menu_name]="'Filter by sector'" 
            [options]="sectorOptions" 
            [multipleSelection]="true" 
            (selectionChange)="onSectorFilterChange($event)">
        </app-dropdown-menu>
        <app-sort-dropdown 
            [placeholder]="'Sort by name'" 
            [showResetOption]="true"
            (sortChange)="onSortChange($event)">
        </app-sort-dropdown>
        <button 
            *ngIf="selectedLocations.length > 0 || selectedSectors.length > 0 || currentSort !== 'none'"
            (click)="resetAllFilters()" 
            class="reset-all-button">
            Reset all
        </button>
    </div>
    <div *ngIf="!isLoading && !errorMessage" class="results-info">
        <p>
            {{ filteredStartups.length }} project{{ filteredStartups.length > 1 ? 's' : '' }} found
            <span *ngIf="filteredStartups.length !== allStartups.length">
                out of {{ allStartups.length }} total
            </span>
        </p>
    </div>
    <div *ngIf="!isLoading && !errorMessage" class="projects-list">
        <div *ngIf="filteredStartups.length === 0" class="no-results">
            <p>No projects match your search criteria.</p>
            <button (click)="resetAllFilters()" class="reset-button">Reset filters</button>
        </div>
        <app-project 
            *ngFor="let startup of filteredStartups"
            [src]="'https://via.placeholder.com/300x200?text='"
            [companyName]="startup.name" 
            [projectName]="startup.name" 
            [description]="startup.description + ' - Sector: ' + startup.sector + ' | Location: ' + startup.location"
            [alt]="'Logo of ' + startup.name"
            [itemId]="startup.id"
            [itemType]="'startup'"
            (cardClick)="onCardClick($event)"
            class="project-card">
        </app-project>
    </div>
    
    <app-footer></app-footer>
</div>
