<div class="event-page">
  <app-header></app-header>
  <app-hero text="Events"></app-hero>

  <div *ngIf="loading" class="loading">Loading events...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <div *ngIf="!loading && !error">
    <div class="calendar-filter-section">
      <div class="filter-controls">
        <button class="toggle-calendar-btn" (click)="toggleCalendar()">
          <span *ngIf="!showCalendar">Filter by date</span>
          <span *ngIf="showCalendar">Hide calendar</span>
        </button>
        <div class="selected-date-info" *ngIf="selectedDate">
          <span>Events on: {{ selectedDate | date: 'fullDate' }}</span>
          <button class="clear-filter-btn" (click)="clearDateFilter()">Erase</button>
        </div>
      </div>
      <div class="calendar-container" *ngIf="showCalendar">
        <app-calendar 
          [events]="allEvents" 
          (dateSelected)="onDateSelected($event)">
        </app-calendar>
      </div>
    </div>

    <div class="events-grid" *ngIf="events.length > 0">
      <app-event_card *ngFor="let e of events; trackBy: trackByEventId" 
        [eventTitle]="e.type" 
        [title]="e.title"
        [text]="e.description" 
        [image]="'/assets/images/default-event.png'" 
        [eventId]="e.id"
        [customClass]="'primary-button'">
      </app-event_card>
    </div>

    <div class="no-events" *ngIf="events.length === 0 && !loading">
      <p *ngIf="selectedDate">No events found for {{ selectedDate | date: 'fullDate' }}</p>
      <p *ngIf="!selectedDate">No events available</p>
    </div>
  </div>
  <app-footer></app-footer>
</div>